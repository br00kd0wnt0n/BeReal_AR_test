import"./modulepreload-polyfill-3cfb730f.js";class s{constructor(){this.authenticMoments=[{id:1,background:"linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb)",title:"âœ¨ Authentic Moment âœ¨",subtitle:"Real friendship, unfiltered",description:"When you're ready to be real, everything becomes clear"},{id:2,background:"linear-gradient(135deg, #a8edea, #fed6e3)",title:"ðŸ’ Genuine Connection",subtitle:"Study stress, shared together",description:"Real moments happen when you least expect them"},{id:3,background:"linear-gradient(135deg, #d299c2, #fef9d7)",title:"ðŸŒ… Morning Reality",subtitle:"Bedhead and coffee, beautifully real",description:"Authenticity is the most beautiful filter"},{id:4,background:"linear-gradient(135deg, #667eea, #764ba2)",title:"ðŸŽ‰ Celebration Truth",subtitle:"Real joy, real friends",description:"The best moments are the unplanned ones"},{id:5,background:"linear-gradient(135deg, #f093fb, #f5576c)",title:"ðŸ’• Love in Reality",subtitle:"Imperfectly perfect together",description:"Real love doesn't need filters"}],this.currentEditingId=null,this.initialize()}initialize(){this.loadContent(),this.loadAnalytics(),this.loadSettings(),this.setupEventListeners()}loadContent(){const t=document.getElementById("contentGrid");t&&(t.innerHTML="",this.authenticMoments.forEach((e,n)=>{const a=this.createContentCard(e,n===0);t.appendChild(a)}))}createContentCard(t,e=!1){const n=document.createElement("div");return n.className=`content-card ${e?"active":""}`,n.innerHTML=`
            <div class="content-preview" style="background: ${t.background}">
                <div>
                    <div style="font-size: 1.2rem; margin-bottom: 5px;">${t.title}</div>
                    <div style="font-size: 0.8rem; opacity: 0.9;">${t.subtitle}</div>
                </div>
            </div>
            <div class="content-info">
                <h3>${t.title}</h3>
                <p>${t.subtitle}</p>
                <p style="font-size: 0.8rem; opacity: 0.6;">${t.description}</p>
            </div>
            <div class="content-actions">
                <button class="content-btn edit-btn" onclick="editContent(${t.id})">Edit</button>
                <button class="content-btn delete-btn" onclick="deleteContent(${t.id})">Delete</button>
            </div>
        `,n}loadAnalytics(){try{const t=JSON.parse(localStorage.getItem("bereal_analytics")||"[]"),e=t.filter(i=>i.event==="page_viewed").length,n=t.filter(i=>i.event==="qr_code_clicked"||i.event==="qr_code_detected").length,a=t.filter(i=>i.event==="reveal_completed").length,o=t.filter(i=>i.event==="bereal_cta_clicked").length;document.getElementById("totalViews").textContent=e,document.getElementById("qrScans").textContent=n,document.getElementById("reveals").textContent=a,document.getElementById("conversions").textContent=o}catch(t){console.error("Failed to load analytics:",t),document.getElementById("totalViews").textContent="0",document.getElementById("qrScans").textContent="0",document.getElementById("reveals").textContent="0",document.getElementById("conversions").textContent="0"}}loadSettings(){try{const t=JSON.parse(localStorage.getItem("bereal_settings")||"{}");document.getElementById("rotationInterval").value=t.rotationInterval||30,document.getElementById("revealDuration").value=t.revealDuration||4,document.getElementById("qrSize").value=t.qrSize||140}catch(t){console.error("Failed to load settings:",t)}}setupEventListeners(){const t=document.getElementById("contentForm");t&&t.addEventListener("submit",e=>{e.preventDefault(),this.saveContent()})}editContent(t){const e=this.authenticMoments.find(n=>n.id===t);e&&(this.currentEditingId=t,document.getElementById("modalTitle").textContent="Edit Authentic Moment",document.getElementById("contentTitle").value=e.title,document.getElementById("contentSubtitle").value=e.subtitle,document.getElementById("contentDescription").value=e.description,document.getElementById("contentBackground").value=e.background,this.showModal())}addNewContent(){this.currentEditingId=null,document.getElementById("modalTitle").textContent="Add New Authentic Moment",document.getElementById("contentTitle").value="",document.getElementById("contentSubtitle").value="",document.getElementById("contentDescription").value="",document.getElementById("contentBackground").value="linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb)",this.showModal()}saveContent(){const t=document.getElementById("contentTitle").value,e=document.getElementById("contentSubtitle").value,n=document.getElementById("contentDescription").value,a=document.getElementById("contentBackground").value;if(!t||!e||!n){alert("Please fill in all required fields");return}if(this.currentEditingId){const o=this.authenticMoments.findIndex(i=>i.id===this.currentEditingId);o!==-1&&(this.authenticMoments[o]={...this.authenticMoments[o],title:t,subtitle:e,description:n,background:a})}else{const o=Math.max(...this.authenticMoments.map(i=>i.id))+1;this.authenticMoments.push({id:o,title:t,subtitle:e,description:n,background:a})}localStorage.setItem("bereal_authentic_moments",JSON.stringify(this.authenticMoments)),this.loadContent(),this.closeModal(),this.showNotification("Content saved successfully!","success")}deleteContent(t){confirm("Are you sure you want to delete this moment?")&&(this.authenticMoments=this.authenticMoments.filter(e=>e.id!==t),localStorage.setItem("bereal_authentic_moments",JSON.stringify(this.authenticMoments)),this.loadContent(),this.showNotification("Content deleted successfully!","success"))}saveSettings(){const t={rotationInterval:parseInt(document.getElementById("rotationInterval").value),revealDuration:parseFloat(document.getElementById("revealDuration").value),qrSize:parseInt(document.getElementById("qrSize").value)};localStorage.setItem("bereal_settings",JSON.stringify(t)),this.showNotification("Settings saved successfully!","success")}exportAnalytics(){try{const t=JSON.parse(localStorage.getItem("bereal_analytics")||"[]"),e={exportDate:new Date().toISOString(),totalEvents:t.length,events:t,summary:{totalViews:t.filter(i=>i.event==="page_viewed").length,qrScans:t.filter(i=>i.event==="qr_code_clicked"||i.event==="qr_code_detected").length,reveals:t.filter(i=>i.event==="reveal_completed").length,conversions:t.filter(i=>i.event==="bereal_cta_clicked").length}},n=JSON.stringify(e,null,2),a=new Blob([n],{type:"application/json"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download=`bereal-analytics-${new Date().toISOString().split("T")[0]}.json`,o.click(),this.showNotification("Analytics data exported successfully!","success")}catch(t){console.error("Failed to export analytics:",t),this.showNotification("Failed to export analytics data","error")}}showModal(){const t=document.getElementById("contentModal");t&&t.classList.add("show")}closeModal(){const t=document.getElementById("contentModal");t&&t.classList.remove("show"),this.currentEditingId=null}showNotification(t,e="info"){const n=document.createElement("div");n.className=`notification ${e}`,n.textContent=t,n.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 10000;
            background: ${e==="success"?"#4CAF50":e==="error"?"#f44336":"#2196F3"};
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
        `,document.body.appendChild(n),setTimeout(()=>{n.style.transform="translateX(0)"},100),setTimeout(()=>{n.style.transform="translateX(100%)",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},300)},3e3)}}document.addEventListener("DOMContentLoaded",()=>{window.adminManager=new s});window.addNewContent=function(){window.adminManager&&window.adminManager.addNewContent()};window.editContent=function(d){window.adminManager&&window.adminManager.editContent(d)};window.deleteContent=function(d){window.adminManager&&window.adminManager.deleteContent(d)};window.saveSettings=function(){window.adminManager&&window.adminManager.saveSettings()};window.exportAnalytics=function(){window.adminManager&&window.adminManager.exportAnalytics()};window.closeModal=function(){window.adminManager&&window.adminManager.closeModal()};
