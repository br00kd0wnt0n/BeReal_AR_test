class i{constructor(){this.events=[],this.sessionId=this.generateSessionId(),this.startTime=Date.now(),this.isEnabled=!0,this.initialize()}initialize(){this.trackPageView(),this.trackEvent("session_started",{sessionId:this.sessionId,userAgent:navigator.userAgent,screenSize:`${screen.width}x${screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`}),this.trackPerformance()}generateSessionId(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}trackEvent(t,e={}){if(!this.isEnabled)return;const n={event:t,timestamp:Date.now(),sessionId:this.sessionId,url:window.location.href,properties:{...e,pageTitle:document.title}};this.events.push(n),console.log("Analytics Event:",n),this.storeEvent(n)}trackPageView(){this.trackEvent("page_viewed",{page:window.location.pathname,referrer:document.referrer})}trackPerformance(){"performance"in window&&window.addEventListener("load",()=>{setTimeout(()=>{const t=performance.getEntriesByType("navigation")[0];t&&this.trackEvent("performance_metrics",{loadTime:t.loadEventEnd-t.loadEventStart,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,firstPaint:this.getFirstPaint(),firstContentfulPaint:this.getFirstContentfulPaint()})},1e3)})}getFirstPaint(){if("performance"in window){const e=performance.getEntriesByType("paint").find(n=>n.name==="first-paint");return e?e.startTime:null}return null}getFirstContentfulPaint(){if("performance"in window){const e=performance.getEntriesByType("paint").find(n=>n.name==="first-contentful-paint");return e?e.startTime:null}return null}storeEvent(t){try{const e=JSON.parse(localStorage.getItem("bereal_analytics")||"[]");e.push(t),e.length>100&&e.splice(0,e.length-100),localStorage.setItem("bereal_analytics",JSON.stringify(e))}catch(e){console.error("Failed to store analytics event:",e)}}getEvents(){return this.events}getStoredEvents(){try{return JSON.parse(localStorage.getItem("bereal_analytics")||"[]")}catch(t){return console.error("Failed to retrieve stored events:",t),[]}}clearEvents(){this.events=[],localStorage.removeItem("bereal_analytics")}exportData(){return{sessionId:this.sessionId,startTime:this.startTime,endTime:Date.now(),events:this.getStoredEvents(),summary:this.generateSummary()}}generateSummary(){const t=this.getStoredEvents(),e={totalEvents:t.length,sessionDuration:Date.now()-this.startTime,uniquePages:[...new Set(t.map(n=>n.url))].length,eventTypes:{}};return t.forEach(n=>{e.eventTypes[n.event]=(e.eventTypes[n.event]||0)+1}),e}sendToAnalyticsService(t){}trackQRCodeInteraction(t){this.trackEvent("qr_code_interaction",{action:t,timestamp:Date.now()})}trackRevealProgress(t){this.trackEvent("reveal_progress",{step:t,progress:t/5*100})}trackCameraInteraction(t){this.trackEvent("camera_interaction",{action:t,timestamp:Date.now()})}trackContentEngagement(t,e){this.trackEvent("content_engagement",{contentId:t,action:e,timestamp:Date.now()})}trackConversion(t,e=null){this.trackEvent("conversion",{type:t,value:e,timestamp:Date.now()})}trackError(t,e={}){this.trackEvent("error",{message:t.message,stack:t.stack,context:e,timestamp:Date.now()})}}const a=new i;function o(r,t={}){a.trackEvent(r,t)}function s(r,t={}){a.trackError(r,t)}window.addEventListener("error",r=>{s(r.error,{filename:r.filename,lineno:r.lineno,colno:r.colno})});window.addEventListener("unhandledrejection",r=>{s(new Error(r.reason),{type:"unhandledrejection"})});export{o as t};
